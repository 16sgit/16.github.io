<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>第一篇博客</title>
      <link href="/2019/04/19/%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/"/>
      <url>/2019/04/19/%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<h2 id="安装Nginx"><a href="#安装Nginx" class="headerlink" title="安装Nginx"></a>安装Nginx</h2><h6 id="nginx安装"><a href="#nginx安装" class="headerlink" title="nginx安装"></a>nginx安装</h6><pre><code>sudo rpm -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpmsudo yum install -y nginxsystemctl enable nginx  //开机自启systemctl start nginx   //启动</code></pre><h6 id="Nginx相关的命令"><a href="#Nginx相关的命令" class="headerlink" title="Nginx相关的命令"></a>Nginx相关的命令</h6><ul><li>systemctl start nginx</li><li>systemctl stop nginx</li><li>systemctl enable nginx.service //开机自启</li><li>nginx -s reload</li><li>pkill -9 nginx  //杀死所有nginx进程</li><li>nginx -t    //查看配置是否正确</li><li><h6 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h6><code>`</code></li><li>文件默认存放目录：/usr/share/nginx/html</li><li>默认站点配置：/etc/nginx/conf.d/defauult.conf</li><li>自定义配置文件：/etc/nginx/conf.d</li><li>全局配置：/etc/nginx/nginx.conf<br><code>`</code></li></ul><h6 id="常用的配置参数"><a href="#常用的配置参数" class="headerlink" title="常用的配置参数"></a>常用的配置参数</h6><blockquote><p>/etc/nginx/conf.d/*.conf<br>nginx虚拟主机的设置在server {}块中</p></blockquote><ul><li>listen    //设置nginx监听哪个端口的http请求</li><li>server_name   //用于识别虚拟主机域名</li><li>index         //http请求url没指定文件时的默认文件</li><li>client_max_body_size  //接受http请求主题长度的最大值</li><li>error_log     //错误日志文件在文件系统中的路径</li><li>access_log    //访问日志文件在文件系统中的路径</li><li>root  //文档根目录的路径</li></ul><h6 id="nginx配置参数解析"><a href="#nginx配置参数解析" class="headerlink" title="nginx配置参数解析"></a>nginx配置参数解析</h6><blockquote><p>/etc/nginx/nginx.conf</p></blockquote><ul><li><p>events.worker_connections = 1024 </p><p>  事件模块指令，定义nginx 每个进程的最大连接数</p></li></ul><h2 id="安装php7"><a href="#安装php7" class="headerlink" title="安装php7"></a>安装php7</h2><h6 id="使用yum安装php"><a href="#使用yum安装php" class="headerlink" title="使用yum安装php"></a>使用yum安装php</h6><ul><li>安装依赖<pre><code>  yum -y install epel-release </code></pre></li><li>获取php源<pre><code>  rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm</code></pre></li><li>安装<pre><code>  yum install php70w</code></pre><h6 id="安装php-fpm"><a href="#安装php-fpm" class="headerlink" title="安装php-fpm"></a>安装php-fpm</h6></li><li>安装php-fpm<pre><code>  sudo yum install php70w-fpm -y </code></pre></li><li><p>php-fpm主配置文件参数</p><blockquote><p>/etc/php-fpm.conf<br><code>`</code><br> emergency_restart_threshold = 10 //一段时间内,失效的fpm进程超过这个值，fpm将平滑重启</p></blockquote><p> emergency_restart_intval //emergency_restart_threshold 设置采用的时间跨度<br><code>`</code></p></li><li>配置进程池<blockquote><p>/etc/php-fpm.d/*.conf</p><pre><code>  user = nginx    //拥有这个php-fpm进程池的系统用户  group = nginx   //拥有这个php-fpm进程池的系统用户组  listen = 127.0.0.1:9000  //进程监听的ip地址和端口号  listen.allowed_client = 127.0.0.1   //允许向fpm发送请求的ip  pm.max_children = 51    //任何时间 fpm进程池最多能有多少个进程  pm.start_services = 3   //启动fpm立即可用的进程数  pm.min_spare_services = 2   //空闲时进程池可以存在的进程数量最小值  pm.max_spare_Services = 4   //空闲时可以存在进程数的最大值  om.max_requests = 1000  //各个进程最多能处理的http请求  slowlog = /path/to/slowlog.log  //日志文件在文件系统中的绝对路径  request_slowlog_timeout = 5s    //当前请求的处理时间超过这个值，就把回溯信息写入slowlog日志文件中</code></pre></blockquote></li><li>常用的php扩展安装<pre><code>sudo yum install php70w-gd  php70w-mysqlnd php70w-pdo php70w-mcrypt php70w-mbstring php70w-json php70w-opcache php70w-xml -y</code></pre>配置nginx支持php</li></ul><hr><blockquote><p>支持php并隐藏index.php以及开启pathinfo模式</p></blockquote><pre><code>    #vi /etc/nginx/conf.d/default.conf    location / {　　if ( !e $request_filename ) {　　　　rewrite ^/目录/(.*)$ /目录/index.php/$1 last;　　}    }    location ~ \.php(.*)$ {　　　　fastcgi_pass 127.0.0.1:9000;　　　　fastcgi_index index.php;　　　　fastcgi_split_path_info ^((?U).+\.php)(/?.+)$;　　　　fastcgi_param SCRIPT_FILENAME              $document_root$fastcgi_script_name;　　　　fastcgi_param PATH_INFO $fastcgi_path_info;　　　　fastcgi_param PATH_TRANSLATED $document_root$fastcgi_path_info;　　　　include fastcgi_params;　　}     chown -R nginx:nginx /usr/share/nginx/html     nginx -t   //测试配置是否正确     systemctl restart nginx</code></pre><h2 id="安装Marindb"><a href="#安装Marindb" class="headerlink" title="安装Marindb"></a>安装Marindb</h2><h6 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h6><pre><code>    yum -y install mariadb-server    mysqladmin -u root password &quot;密码&quot;  //修改密码    systemctl start mariadb //开启    systemctl enable mariadb    //开机自启</code></pre><h6 id="开启远程连接"><a href="#开启远程连接" class="headerlink" title="开启远程连接"></a>开启远程连接</h6><pre><code>   GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39;IDENTIFIED BY &#39;123456&#39; WITH GRANT OPTION;   flush privileges;</code></pre><h2 id="安装Redis"><a href="#安装Redis" class="headerlink" title="安装Redis"></a>安装Redis</h2><h2 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h2><pre><code>    wget http://download.redis.io/releases/redis-2.8.17.tar.gz    tar xzf redis-2.8.17.tar.gz    cd redis-2.8.17    make    cd src    ./redis-server      //开启redis    ./redis-cli         //进入redis客户端  </code></pre><h2 id="安装-composer"><a href="#安装-composer" class="headerlink" title="安装 composer "></a>安装 composer </h2>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2019/04/18/hello-world/"/>
      <url>/2019/04/18/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre><code class="bash">$ hexo new &quot;My New Post&quot;</code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre><code class="bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre><code class="bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre><code class="bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
